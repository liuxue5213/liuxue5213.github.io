<!DOCTYPE html>
<html lang="zh-CN">

  
<head>
  <meta charset="utf-8">
  <meta name="author" content="johnscott" />
  
  
  
  <title>Python3笔记 | JohnScott2046的博客</title>

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
    <meta name="keywords" content="Python,Python," />
  

  <script>
    console.log('\n%c Hexo-theme-bmw v4.0 ' + '%c 🎉 https://github.com/dongyuanxin/theme-bmw 🎉\n' + '\n%c View demo online ' + '%c 🔍 https://godbmw.com/ 🔍  \n' , 'color: #fadfa3; background: #030307; padding:3px 0;', '', 'color: #fadfa3; background: #030307; padding:3px 0;', '');
  </script>

  
    <meta name="description" content="超级帽子戏法的个人博客,主要记录复制粘贴过来的笔记,还有自己的一些心得体会">
  

  

  
    <link rel="icon" href="/images/favicon.ico">
    <link rel="apple-touch-icon" href="/images/touch-icon.png">
  

  <link href="https://cdn.bootcss.com/fancybox/3.5.2/jquery.fancybox.min.css" rel="stylesheet">
  
<link rel="stylesheet" href="/css/base.css">
<link rel="stylesheet" href="/icon/iconfont.css">
<link rel="stylesheet" href="/css/github-markdown.css">
<link rel="stylesheet" href="/css/highlight.css">


  
<script src="/js/util.js"></script>
<script src="/js/valine.min.js"></script>


  

  
    <link href="https://cdn.bootcss.com/aplayer/1.10.1/APlayer.min.css" rel="stylesheet">
    <script src="https://cdn.bootcss.com/aplayer/1.10.1/APlayer.min.js" async></script>
  

  
    <link href="https://cdn.bootcss.com/social-share.js/1.0.16/css/share.min.css" rel="stylesheet">
  
  
  <script src="//cdn.bootcss.com/jquery/3.3.1/jquery.min.js" async></script>
  
  
    <script src="//cdn.jsdelivr.net/npm/leancloud-storage@3.11.0/dist/av-min.js"></script>
  

<meta name="generator" content="Hexo 5.1.1"></head>

  <body>
    <meta name="baidu-site-verification" content="code-GGEum2Y5d8" />
    

    <div id="app">

      <div class="header-wrap">
  <header>
    <div class="site-brand">
      <div class="site-title">
        <a href="/">JohnScott2046</a>
      </div>
    </div>
    <nav class="site-navigation">
      <ul class="nav-menu">
      
        <li class="nav-item" data-path="/">
          
            <a 
              href="/"
              target="_self"
            >
              主页
            </a>
          
        </li>
      
        <li class="nav-item" data-path="/archives/">
          
            <a 
              href="/archives/"
              target="_self"
            >
              归档
            </a>
          
        </li>
      
        <li class="nav-item" data-path="/categories/">
          
            <a 
              href="/categories/"
              target="_self"
            >
              分类
            </a>
          
        </li>
      
        <li class="nav-item" data-path="/tags/">
          
            <a 
              href="/tags/"
              target="_self"
            >
              标签
            </a>
          
        </li>
      
        <li class="nav-item" data-path="/friends/">
          
            <a 
              href="/friends/"
              target="_self"
            >
              友链
            </a>
          
        </li>
      
        <li class="nav-item" data-path="/about/">
          
            <a 
              href="/about/"
              target="_self"
            >
              关于
            </a>
          
        </li>
      
        <li class="nav-item" data-path="">
          
            <a href="javascript:void(0);" v-else>联系我</a>
            <ul class="nav-menu--dropdown">
              
                <li>
                  <a 
                    href="https://github.com/liuxue5213" 
                    target="_blank"
                  >
                    Github
                  </a>
                </li>
              
                <li>
                  <a 
                    href="https://www.zhihu.com/people/liuxue5213" 
                    target="_blank"
                  >
                    知乎
                  </a>
                </li>
              
                <li>
                  <a 
                    href="http://weibo.com/liuxue5213" 
                    target="_blank"
                  >
                    微博
                  </a>
                </li>
              
                <li>
                  <a 
                    href="https://www.douban.com/people/liuxue5213" 
                    target="_blank"
                  >
                    豆瓣
                  </a>
                </li>
              
                <li>
                  <a 
                    href="/linkedin.com/in/liuxue5213" 
                    target="_blank"
                  >
                    linkedin
                  </a>
                </li>
              
            </ul>
          
        </li>
      
      </ul>
    </nav>
    <i class="iconfont icon-menu"></i>
  </header>
</div>

<script>
  let links = document.querySelectorAll('.nav-item');
  for(let link of links){
    let childrenLink = link.querySelector('ul');
    link.addEventListener('mouseenter', () => {
      if(childrenLink) {
        childrenLink.className = "nav-menu--dropdown active";
      }
    })
    link.addEventListener('mouseleave', () => {
      if(childrenLink) {
        childrenLink.className = "nav-menu--dropdown";
      }
    })
  }
  let rootRealPath = getRealPath(window.location.pathname, true);
  for(let link of links) {
    let linkPath = link.getAttribute("data-path");
    if(linkPath && getRealPath(linkPath, true) === rootRealPath) {
      link.className = "nav-item hover";
    }
  }

  let iconMenu = document.querySelector("i.iconfont.icon-menu"),
    iconMenuClicked = false;
  let navDOM = document.querySelector("nav.site-navigation");
  iconMenu.addEventListener("click", () => {
    iconMenuClicked 
      ? navDOM.className = "site-navigation active"
      : navDOM.className = "site-navigation";
    iconMenuClicked = !iconMenuClicked;
  })
</script>

      








<div class="container post-index">

  

<div class="post">
  <h1 class="article-title">
    <span>Python3笔记</span>
  </h1>
  <div class="article-top-meta">
    <span>
      发布 : 
      2020-01-09
    </span>
    
      <span>
        分类 : 
          <a href="/categories/Python/">
            Python
          </a>
      </span>
    
    
      <span>
        浏览 : <span class="article-timer" data-identity="Python笔记"></span>
      </span>
    
  </div>

  

  <div class="article-content">
    <div class="markdown-body">
      <h2 id="基础知识"><a href="#基础知识" class="headerlink" title="基础知识"></a>基础知识</h2><h3 id="调用解释器"><a href="#调用解释器" class="headerlink" title="调用解释器"></a>调用解释器</h3><table>
<thead>
<tr>
<th>命令</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>-d</td>
<td>提供调试输出</td>
</tr>
<tr>
<td>-O</td>
<td>生成优化的字节码(pyo文件)</td>
</tr>
<tr>
<td>-S</td>
<td>不导入site模块，启动时自动查找python路径</td>
</tr>
<tr>
<td>-v</td>
<td>语句详细追踪</td>
</tr>
</tbody></table>
<h3 id="指定文件的编码"><a href="#指定文件的编码" class="headerlink" title="指定文件的编码"></a>指定文件的编码</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;usr&#x2F;bin&#x2F;env python</span><br><span class="line"># -*- coding: utf-8 -*-</span><br></pre></td></tr></table></figure>
<h3 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h3><p>单行 #<br>行内 #<br>如果使用中文 必须加上<code># -*- coding: utf-8 -*-</code><br>跨平台运行 必须加上 <code>#!/usr/bin/env python</code></p>
<h3 id="init-py注册文件"><a href="#init-py注册文件" class="headerlink" title="__init__.py注册文件"></a><code>__init__.py</code>注册文件</h3><h3 id="三引号字符串-多行-自由使用单双引号"><a href="#三引号字符串-多行-自由使用单双引号" class="headerlink" title="三引号字符串(多行)  自由使用单双引号"></a>三引号字符串(多行)  自由使用单双引号</h3><p>‘’’this is a multi-line string</p>
<h3 id="连接字符串"><a href="#连接字符串" class="headerlink" title="连接字符串 +"></a>连接字符串 +</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a &#x3D; &#39;hello&#39;</span><br><span class="line">b &#x3D; &#39;world&#39;</span><br><span class="line">c &#x3D; a + b</span><br></pre></td></tr></table></figure>
<h3 id="以字符串形式输出"><a href="#以字符串形式输出" class="headerlink" title="以字符串形式输出"></a>以字符串形式输出</h3><p>str()<br>repr()</p>
<h3 id="字符串输入"><a href="#字符串输入" class="headerlink" title="字符串输入"></a>字符串输入</h3><p>python3中 <code>input()</code> 和 <code>raw_input()</code> 灯效</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">name &#x3D; input(&#39;input you name:&#39;)</span><br><span class="line">print(&quot;my name is &quot;+name)</span><br></pre></td></tr></table></figure>

<h3 id="算术运算符"><a href="#算术运算符" class="headerlink" title="算术运算符"></a>算术运算符</h3><ul>
<li>加</li>
</ul>
<ul>
<li>减</li>
</ul>
<ul>
<li>乘<br>/   除<br>%   余</li>
<li><ul>
<li>乘方</li>
</ul>
</li>
</ul>
<p>python3中 已经不需要指定相同类型运算</p>
<h3 id="控制结构"><a href="#控制结构" class="headerlink" title="控制结构"></a>控制结构</h3><p>true    “string” 1<br>false    “”  0  ()  [] {}  None  </p>
<h4 id="if"><a href="#if" class="headerlink" title="if"></a>if</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">if (表达式):</span><br><span class="line">	代码块</span><br><span class="line">elif 表达式:</span><br><span class="line">	代码块</span><br><span class="line">else:</span><br><span class="line">	代码块</span><br></pre></td></tr></table></figure>

<h4 id="while"><a href="#while" class="headerlink" title="while"></a>while</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">while 条件:</span><br><span class="line">	代码块</span><br><span class="line">else</span><br><span class="line">	代码块</span><br></pre></td></tr></table></figure>

<h4 id="for"><a href="#for" class="headerlink" title="for"></a>for</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">for i in object:</span><br><span class="line">	代码块</span><br><span class="line">else:</span><br><span class="line">	代码块</span><br></pre></td></tr></table></figure>
<h4 id="并行迭代"><a href="#并行迭代" class="headerlink" title="并行迭代"></a>并行迭代</h4><p>同时迭代两个程序 range() zip()</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">for i in range(len(name)):</span><br><span class="line">for i,k in zip(name, age):</span><br></pre></td></tr></table></figure>

<h4 id="编号迭代-enumerate"><a href="#编号迭代-enumerate" class="headerlink" title="编号迭代 enumerate"></a>编号迭代 enumerate</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">for index,val in enumerate(name):</span><br></pre></td></tr></table></figure>

<h4 id="pass-类似于占位符"><a href="#pass-类似于占位符" class="headerlink" title="pass 类似于占位符"></a>pass 类似于占位符</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">if a &#x3D; b :</span><br><span class="line">    print(&#39;ok&#39;)</span><br><span class="line">else:</span><br><span class="line">    pass</span><br></pre></td></tr></table></figure>

<h4 id="del-删除序列或字典"><a href="#del-删除序列或字典" class="headerlink" title="del 删除序列或字典"></a>del 删除序列或字典</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">name &#x3D; &#39;123&#39;</span><br><span class="line">del name</span><br></pre></td></tr></table></figure>

<h4 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">for (a, b) in [(1, 2), (3, 4)]:</span><br><span class="line">	print(a,b)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">arr &#x3D; [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;]</span><br><span class="line">i &#x3D; iter(arr)</span><br><span class="line">print(i.next()) a</span><br><span class="line">print(i.next()) b</span><br><span class="line">print(i.next()) c</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">arr &#x3D; [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;]</span><br><span class="line">for i in iter(arr):</span><br><span class="line">	print(i)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">name &#x3D; [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;]</span><br><span class="line">age &#x3D; [111, 222, 333]</span><br><span class="line">for i in range(len(name)):</span><br><span class="line">	print(name[i],age[i])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">for i,k in zip(name, age):</span><br><span class="line">	print(i,k)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">name &#x3D; [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;]</span><br><span class="line">for index,val in enumerate(name):</span><br><span class="line">	if &#39;a&#39; in val:</span><br><span class="line">	 	name[index] &#x3D; &#39;e&#39;</span><br><span class="line">for i in name:</span><br><span class="line">    print(i)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">input &#x3D; input(&quot;请输入名称：&quot;)</span><br><span class="line">name &#x3D; [&#39;john&#39;, &#39;scott&#39;]</span><br><span class="line">if input:</span><br><span class="line">    for i in name:</span><br><span class="line">        if input &#x3D;&#x3D; i:</span><br><span class="line">            print(i)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">i &#x3D; 0;</span><br><span class="line">while i &lt;&#x3D; 10:</span><br><span class="line">	if i &lt; 8:</span><br><span class="line">	    print(&#39;end&#39;)</span><br><span class="line">	    break</span><br><span class="line">	else:</span><br><span class="line">	    i+&#x3D;1</span><br><span class="line">	    print(i)</span><br><span class="line">		time.sleep(1)</span><br></pre></td></tr></table></figure>

<h3 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">def login(name, pwd):</span><br><span class="line">    if (name &#x3D;&#x3D; &#39;admin&#39;) and (pwd &#x3D;&#x3D; &#39;123456&#39;):</span><br><span class="line">        print(111)</span><br><span class="line">    else:</span><br><span class="line">        print(222)   </span><br><span class="line">login(&#39;admin&#39;, &#39;123456&#39;)    </span><br></pre></td></tr></table></figure>
<h4 id="元组"><a href="#元组" class="headerlink" title="元组"></a>元组</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">def login(* info):</span><br><span class="line">    if (name &#x3D;&#x3D; info[0]) and (pwd &#x3D;&#x3D; info[1]):</span><br><span class="line">        print(111)</span><br><span class="line">    else:</span><br><span class="line">        print(222)   </span><br><span class="line">login(&#39;admin&#39;, &#39;123456&#39;)</span><br></pre></td></tr></table></figure>

<h4 id="字典"><a href="#字典" class="headerlink" title="字典"></a>字典</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">def login(** info):</span><br><span class="line">    if (name &#x3D;&#x3D; info[0]) and (pwd &#x3D;&#x3D; info[1]):</span><br><span class="line">        print(111)</span><br><span class="line">    else:</span><br><span class="line">        print(222)   </span><br><span class="line">login(&#39;admin&#39;, &#39;123456&#39;)</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">def login(info):</span><br><span class="line">    if (info[0] &#x3D;&#x3D; &#39;admin&#39;) and (info[1] &#x3D;&#x3D; &#39;123456&#39;):</span><br><span class="line">        print(111)</span><br><span class="line">    else:</span><br><span class="line">        print(222)</span><br><span class="line">login([&#39;admin&#39;, &#39;123456&#39;])   </span><br></pre></td></tr></table></figure>

<h3 id="模块导入"><a href="#模块导入" class="headerlink" title="模块导入"></a>模块导入</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import module_name</span><br><span class="line">from module_name import *</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">import sys</span><br><span class="line">#获取当前的文件编码</span><br><span class="line">type &#x3D; sys.getfilesystemencoding()</span><br><span class="line">login().decode(&#39;UFT-8&#39;).encode(type)</span><br></pre></td></tr></table></figure>

<h3 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h3><p><code>__name__</code>  判断当前模块是不是程序入口</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">if __name &#x3D;&#x3D; &#39;__main__&#39;:</span><br><span class="line">    print(&#39;main&#39;)</span><br><span class="line">else:</span><br><span class="line">    print(&#39;other&#39;)</span><br></pre></td></tr></table></figure>

<h2 id="列表、序列-可变的数据类型-由一系列元素组成"><a href="#列表、序列-可变的数据类型-由一系列元素组成" class="headerlink" title="列表、序列 可变的数据类型 由一系列元素组成"></a>列表、序列 可变的数据类型 由一系列元素组成</h2><p>stu = [‘john’, ‘scott’, ‘cole’]<br>stu.append(‘lampard’) # 追加元素<br>stu.pop() # 获取或删除最后一个元素<br>stu.insert(2, ‘1989’) # 添加至指定位置<br>count = str(len(stu)) # 返回元素总数<br>stu[2] = ‘cole’ # 元素赋值<br>stu.remove(‘cole’) # 删除元素 如果存在多个相同的元素，只会删除位置靠前的一个<br>del stu(0) # 删除元素 根据索引<br>stu[3:] = [‘hello’, ‘world’] # 分片取值、赋值 list[m: n] m,n为正负整数 不包含n的元素</p>
<p>list = [‘john’, ‘scott’, ‘1989’, ‘hello’, ‘world’]<br>list[-2]  # 负索引访问元素 hello<br>list[-3: -1] # [‘1989’, ‘hello’]<br>list[0: -2] # [‘john’, ‘scott’, ‘1989’]<br>list[::2] # [‘john’, ‘1989’, ‘world’] 步长</p>
<p>遍历二元列表<br>list1 = [‘a’, ‘b’, ‘c’]<br>list2 = [‘john’, ‘scott’, ‘1989’, ‘hello’, ‘world’]<br>list = [list1, list2] # [[‘a’, ‘b’, ‘c’], [‘john’, ‘scott’, ‘1989’, ‘hello’, ‘world’]]<br>for i in range(len(list)):<br>    print(list[i])</p>
<p>列表连接 extend() + += *<br>list1 = [‘a’, ‘b’, ‘c’]<br>list2 = [‘a’, ‘2’, ‘3’]<br>list1.extend(list2)<br>print(list1) # [‘a’, ‘b’, ‘c’, ‘a’, ‘2’, ‘3’]</p>
<p>list1 += [‘d’, ‘e’]<br>print(list1) # +追加列表 同append()</p>
<p>list1 = [‘1’, ‘2’] * 2 # 列表中元素重复n倍</p>
<p>列表查找 返回序号 index()<br>list = [‘a’, ‘b’, ‘c’, ‘a’, ‘2’, ‘3’]<br>i = list.index(‘a’)  # 0</p>
<p>列表排序 sort()<br>list1 = list.sort() # 排序修改原有的列表 重新赋值给list1<br>list.sort(reverse = True) # 反转<br>list.reverse() # 反转</p>
<h3 id="元组-不可变序列-tuple"><a href="#元组-不可变序列-tuple" class="headerlink" title="元组 不可变序列 tuple()"></a>元组 不可变序列 tuple()</h3><p>tuple = (‘11’, ‘22’, ‘33’)<br>tuple1 = (tuple, ‘44’, ‘55’)<br>print(tuple1[0][1])</p>
<p>tuple = (‘11’, ‘22’, ‘33’)<br>a,b,c = tuple # 解包<br>print(a)  # 11<br>print(b)  # 22<br>print(c)  # 33</p>
<p>遍历 range() map()迭代器<br>def square(x) :<br>    return x ** 2;<br>tuple = (‘11’, ‘22’, ‘33’)<br>print(map(square, tuple1))</p>
<h3 id="字典-一系列key-value对组成，类似于列表，字典无序，使用逗号连接"><a href="#字典-一系列key-value对组成，类似于列表，字典无序，使用逗号连接" class="headerlink" title="字典 一系列key-value对组成，类似于列表，字典无序，使用逗号连接 {}"></a>字典 一系列key-value对组成，类似于列表，字典无序，使用逗号连接 {}</h3><p>dict = {‘name’:’liuxue’,’age’:’20’} # 指定索引编号<br>print(dict[‘name’]) #liuxue</p>
<p>dict = {1:’liuxue’,2:’20’} # 数字作为索引<br>print(dict[2]) # 20</p>
<p>stu = [(1,2), (3,4)] # dict()函数创建 列表映射对应的字典<br>dic = dict(stu)<br>print(dic) # {1: 2, 3: 4}</p>
<p>dict = dict(name = ‘liuxue’, age = ‘20’) # 通过关键字参数创建<br>print(dict)</p>
<p>setdefault(key [, value]) # 添加元素 value可选，默认None;</p>
<p>dict.setdefault(‘remark’) # 不指定value<br>print(dict) # {‘name’: ‘liuxue’, ‘age’: ‘20’, ‘remark’: None}</p>
<p>dict.setdefault(‘remark’, ‘111’) # 已经存在key 返回所有的值<br>print(dict) # {‘name’: ‘liuxue’, ‘age’: ‘20’, ‘remark’: None}</p>
<p>dict.setdefault(‘memo’, ‘222’) # key不存在，返回包含新元素的所有值<br>print(dict) # {‘name’: ‘liuxue’, ‘age’: ‘20’, ‘remark’: None, ‘memo’: ‘222’}</p>
<p>dict[‘memo’] = ‘3333’ # 直接修改或者赋值；key存在 修改值；key不存在 新建值<br>print(dict) # {‘name’: ‘liuxue’, ‘age’: ‘20’, ‘remark’: None, ‘memo’: ‘3333’}</p>
<p>del(dict[‘remark’]) # 删除字典的元素<br>del dict[‘remark’] # del保留字 同del()删除元素</p>
<p>pop(key[, value]) # 删除并返回 指定键的条目 key必填<br>print(dict.pop(‘memo’)) # 返回指定键的条目 3333<br>print(dict) # {‘name’: ‘liuxue’, ‘age’: ‘20’}</p>
<p>dict.popitem() # 方法随机返回并删除字典中的最后一对键和值</p>
<p>dict.get(‘name’) # 访问字典的某个元素 如果不存在的key 不会抛异常<br>dict[‘name’] # 如果不存在的key 会报错抛异常</p>
<p>dict.clear() # 清空字典</p>
<p>dict.copy() # 复制一份相同key-value的字典<br>dictc = dict.copy()</p>
<p>‘memo’ in dict #  判断key是否在字典中<br>‘memo’ not in dict</p>
<p>{}.fromkeys([key1, key2…][, value]) # 使用指定的key创建新的字典，每个值默认None<br>dicts.fromkeys([‘a’, ‘b’, ‘c’], ‘1111’) # {‘a’: ‘1111’, ‘b’: ‘1111’, ‘c’: ‘1111’}</p>
<p>dict.update(dict1) # 利用一个字典更新另一个字典 用dict1数据替换到dict中<br>dict = dict(name = ‘liuxue’, age = ‘20’, city = ‘china’)<br>dict1 = {‘name’:’john’, ‘age’:’30’, ‘city’:’england’}<br>dict.update(dict1) # {‘name’: ‘john’, ‘age’: ‘30’, ‘city’: ‘england’, ‘memo’: ‘222’}</p>
<p>sorted() # 字典排序<br>dict = {‘a’:10, ‘c’:5, ‘d’:15, ‘b’:20}<br>print(sorted(dict.items(), key = lambda d:d[0])) # [(‘a’, 10), (‘b’, 20), (‘c’, 5), (‘d’, 15)]<br>print(sorted(dict.items(), key = lambda d:d[1])) # [(‘c’, 5), (‘a’, 10), (‘d’, 15), (‘b’, 20)]</p>
<p>for i in dict: # 遍历字典<br>    print(i) # name age</p>
<p>for k,v in dict.items(): # 使用items()方法遍历<br>    print(k, v)</p>
<p>for k in iter(dict.keys()):<br>    print(i) # 遍历key</p>
<p>for i in iter(dict.values()):<br>    print(v) # 遍历value</p>
<h3 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h3><p>分片 不包括第三个偏移的字符<br>str = ‘hello world’<br>str[1:3] # el<br>str[1:]  # ello world 1到最后一个字符 包括最后一个字符<br>str[:3]  # hel 0到第3个字符  不包括最后一个<br>str[:-1] # hello world 0到最后一个 不包括最后一个</p>
<p>h = ‘hello’ # 字符串格式化<br>name = ‘liuxue’<br>print(“say %s %s” % (h, name)) # say hello liuxue</p>
<p>%s 字符串<br>%d 十进制整数<br>%f 浮点十进制数字<br>%e 浮点数字<br>%c 字符串或者ASCII码</p>
<p>‘’.join(list) # 集合的所有值根据指定的字符串连接<br>s = [‘a’, ‘b’, ‘c’]<br>print(‘’.join(s)) # abc</p>
<p>s = ‘a’, ‘b’, ‘c’<br>print(‘,’.join(s)) # a,b,c</p>
<p>split() # 通过某个标识符将字符串拆分<br>s = ‘a=&gt;b=&gt;c=&gt;d’<br>print(s.split(‘=&gt;’)) # [‘a’, ‘b’, ‘c’, ‘d’]</p>
<p>strip() # 去除字符串首尾字符 依次去除所有相应的字符 知道没有匹配<br>str = “heelloo world hheeeloo”<br>print(str.strip(‘hello’))  # world<br>print(str.strip(‘heo’))    # lloo world hheeel<br>print(str.strip(‘oleh’))   # world</p>
<p>lstrip() # 左侧的字符<br>rstrip() # 右侧的字符</p>
<p>startswith(sub[,start[,end]]) # 判断一个文本是否以一个字符串开始 返回true/false<br>endswitch(sub[,start[,end]]) # 判断一个文本是否以一个字符串结尾 返回true/false 正常下标<br>print(str.startswith(‘he’))          # true<br>print(str.startswith(‘he’, 0))       # true<br>print(str.startswith(‘heell’, 0, 4)) # false 不包含最后一位<br>print(str.startswith(‘heell’, 0, 5)) # true</p>
<p>find() # 查找字符串<br>rfind() # 从右往左查找 返回正常顺序的下标<br>print(str.find(‘h’))  # 0<br>print(str.rfind(‘h’)) # 15<br>print(str.find(‘eloo’))   # 18<br>print(str.rfind(‘eloo’))  # 18</p>
<p>count() # 判断是否存在一个字符串<br>str.count(‘;’)  # -1 不存在</p>
<p>replace() # 替换字符串<br>str = ‘hello world’<br>print(str.replace(‘world’, ‘liuxue’)) # hello liuxue<br>print(str.replace(‘l’,’a’,2)) # heaao world 指定替换次数</p>
<p>translate # 同replace() 效率会高一点，方法根据参数table给出的表(包含 256 个字符)转换字符串的字符,要过滤掉的字符放到 deletechars 参数中<br>intab = “aeiou”<br>outtab = “12345”<br>trantab = str.maketrans(intab, outtab)<br>str = “this is string example….wow”<br>print(str.translate(trantab))  # th3s 3s str3ng 2x1mpl2….w4w</p>
<p>strptime() # 时间转换<br>先使用 import time import datetime<br>%a 星期几简称 mon<br>%A 星期几全程 Monday<br>%b 月份简写<br>%B 月份全称<br>%c 标准日期的时间串<br>%C 年份的后两位数字<br>%d 十进制表示的每月的第几天<br>%D 月/天/年<br>%R 显示小时和分钟 hh:mm<br>%T 显示时分秒  hh:mm:ss<br>%U 第几年的第几周 把星期日作为第一天<br>%X 标准的时间串</p>
<p>%e 十进制表示的每月第几天<br>%F 年-月-日<br>%g 年份的后两位数字，使用基于周的年<br>%G 年份，使用基于周的年<br>%h 简写的月份名<br>%H 24小时制的小时<br>%I 12小时制的小时<br>%r 12小时制的时间<br>%S 十进制的秒数<br>%u 每周的第几天，星期一为第一天<br>%x 标准的日期串</p>
<p>datetime.date.today()<br>datetime.datetime.strptime(a,’%Y%m%d’).date()</p>
<p>s = ‘2020-01-18’</p>
<h1 id="print-time-strftime-“-Y-m-d-H-M-S”-time-localtime"><a href="#print-time-strftime-“-Y-m-d-H-M-S”-time-localtime" class="headerlink" title="print(time.strftime(“%Y-%m-%d %H:%M:%S”, time.localtime()))"></a>print(time.strftime(“%Y-%m-%d %H:%M:%S”, time.localtime()))</h1><h1 id="print-time-strftime-“-Y-m-d”-time-localtime"><a href="#print-time-strftime-“-Y-m-d”-time-localtime" class="headerlink" title="print(time.strftime(“%Y-%m-%d”, time.localtime()))"></a>print(time.strftime(“%Y-%m-%d”, time.localtime()))</h1><p>t = time.strptime(s, “%Y-%m-%d”)<br>y,m,d = t[0:3]<br>print(datetime.datetime(y,m,d)) # 需要转换的字符串, 转换格式</p>
<p>正则表达式<br>^ 匹配的字符必须在最前面<br>$ 匹配最末的字符</p>
<ul>
<li>0次或n次</li>
</ul>
<ul>
<li>匹配1次或n次<br>? 0次或1次<br>. 匹配除换行符外的所有字符<br>(x) 匹配x<br>x|y 匹配x或y<br>{n} 匹配n个<br>{n,} 匹配至少n个<br>{n,m} 匹配至少n最多m个<br>[xyz] 匹配列表中任一一个字符<br>[b] 匹配一个空格</li>
</ul>
<p>re.match() # 从字符串的开始匹配<br>完全匹配 需要末尾加上边界符$<br>re.search() # 找到第一个匹配后返回<br>re.sub() # 替换字符串中的匹配<br>re.split() # 分割字符串<br>re.compile() # 把正则表达式编译成一个正则表达式对象<br>re.findall() # 获取字符串中所有匹配的字符串<br>escape(pattern) # 匹配字符串中的特殊字符</p>
<p>IGNORECASE # 忽略中文的大小写<br>LOCALE # 处理字符集本地化<br>MULTILINE # 是否支持多行匹配<br>DOTALL # 匹配一些特殊标记<br>VERBOSE # 忽略正则表达式中的空格或者换行等字符<br>UNICODE # 使用unicode编码</p>
<h2 id="面向对象"><a href="#面向对象" class="headerlink" title="面向对象"></a>面向对象</h2><p>多态 可以对不同类的对象使用相同操作<br>封装 对外部隐藏对象的工作细节<br>继承 以普通的类为基础 建立专门类的对象</p>
<p>class Test:<br>    name = ‘john’<br>    def setName(self, name):<br>        self.name = name<br>    def getName(self):<br>        return self.name</p>
<p>obj = Test()<br>print(obj.getName())<br>print(obj.setName(‘hello’))<br>print(obj.getName())  </p>
<h2 id="文件读写"><a href="#文件读写" class="headerlink" title="文件读写"></a>文件读写</h2><p>open(name[, mode[, buffering]])函数<br>r 读<br>w 读写<br>a 写入<br>b 二进制模式</p>
<ul>
<li>读写模式<br>U 支持换行符</li>
</ul>
<p>o = open(‘ssq.txt’, ‘r’)<br>o.write(‘11111111111111’)<br>o.close()</p>
<p>read([num]) # 一次性将文件中的所有数据读取出来 num控制读取时返回的字节<br>o = open(‘ssq.txt’, ‘r’)<br>cont = o.read(16)<br>print(cont)<br>o.tell() # 返回当前数据流 字符的长度<br>cont = o.read(16)<br>print(cont)<br>o.close()</p>
<p>readline([num]) # 每次读取文件中的一行数据<br>o = open(‘ssq.txt’, ‘r’)<br>cont = o.readline(10) # 显示指定的字符长度<br>print(cont)<br>o.close()</p>
<p>readlines() # 读取的数据 需要使用循环来显示<br>o = open(‘ssq.txt’, ‘r’)<br>conts = o.readlines()<br>for i in conts:<br>    print(i)<br>o.close()</p>
<h3 id="文件写入"><a href="#文件写入" class="headerlink" title="文件写入"></a>文件写入</h3><p>write(content) # 写入字符串到文件中<br>o = open(‘1.txt’, ‘w+’)  # w+ 插入的内容中可以包含特殊换行符<br>o.write(‘1111111111111’)<br>o.close()</p>
<p>writelines(listcontent) # 写入一个列表内容<br>o = open(‘2.txt’, ‘w+’)<br>seq = [“菜鸟教程 1\n”, “菜鸟教程 2”]<br>o.writelines(seq)<br>o.close()</p>
<h2 id="os"><a href="#os" class="headerlink" title="os"></a>os</h2><p>先引入import os<br>os.getcwd()    # 获取当前的工作目录<br>os.getenv()    # 读取环境变量<br>os.putenv()    # 设置环境变量<br>os.remove()    # 删除一个文件<br>os.system()    # 运行shell命令<br>os.path.split()     # 返回一个路径的目录名和文件名<br>os.path.isfile()    # 判断路径是不是文件<br>os.path.isdir()     # 判断路径是不是目录<br>os.path.existe()    # 判断路径是否真正存在<br>os.listdir(dirname) # 列出dirname下的目录和文件<br>os.chdir(dirname)   # 切换工作目录到dirname<br>os.path.getsize(name)  # 获取文件大小<br>os.path.abspath(name)  # 获取绝对路径<br>os.path.join(name)     # 连接目录与文件名或目录<br>os.path.split(name)    # 分割文件名与目录<br>os.path.basename(name) # 返回文件名<br>os.path.dirname(name)  # 返回文件路径<br>os.mkdir(dir)          # 创建文件<br>os.makedirs(dir)       # 可以创建多级目录<br>os.rmdir(dir)          # 删除空目录，目录中有文件会抛出异常</p>
<p>import shutil<br>shutil.rmtree(dir)  # 删除目录</p>
<h2 id="备份、恢复文件"><a href="#备份、恢复文件" class="headerlink" title="备份、恢复文件"></a>备份、恢复文件</h2><p>copyfile(src, dst) # 从src复制到dst中，dst需要有写权限，dst存在会被覆盖<br>copymode(src, dst) # 只复制权限，其他东西不会被复制<br>copystat(src, dst) # 复制权限、最后访问时间、最后修改时间<br>copy(src, dst)     # 复制一个文件到另一个文件或目录<br>copy2(src, dst)    # 两个位置的文件系统相同，会rename，否则move<br>copytree(olddor, newdir, true/false) # </p>
<h2 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理"></a>异常处理</h2><p>try:<br>    异常程序<br>except 异常对象， 异常标识:</p>
<p>try:<br>    异常程序<br>except (异常对象1， 异常对象2) , 异常标识:</p>
<p>try:<br>    异常程序<br>    raise NameError # 手工抛出异常 程序停止<br>except 异常对象， 异常标识:<br>else:<br>    没有异常时的程序<br>finally:<br>    执行完try之后（不论异常情况）执行的程序</p>
<p>assert(条件表达式， 结果) # 检测某个表达式是否为真，如果表达式失败 引发assertion异常<br>assert 1 == 2, ‘111111111’</p>
<h2 id="网络模型"><a href="#网络模型" class="headerlink" title="网络模型"></a>网络模型</h2><p>OSI 开放式系统互联，由国际标准化组织制定的<br>OSI模型将网络通信的工作分为7层，物理层、数据链路层、网络层、传输层、会话层、表示层、应用层</p>
<h2 id="读取Excel"><a href="#读取Excel" class="headerlink" title="读取Excel"></a>读取Excel</h2><p>先使用pip安装xlrd</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">import xlrd</span><br><span class="line">from xlrd import xldate_as_datetime, xldate_as_tuple</span><br><span class="line"></span><br><span class="line"># 文件路径</span><br><span class="line">file_path &#x3D; r&#39;zhiban.xlsx&#39;</span><br><span class="line"># 文件路径的中文转码，如果路径非中文可以跳过</span><br><span class="line"># file_path &#x3D; file_path.decode(&#39;utf-8&#39;)</span><br><span class="line"># 获取数据</span><br><span class="line">data &#x3D; xlrd.open_workbook(file_path)</span><br><span class="line">table &#x3D; data.sheet_by_name(&#39;Sheet1&#39;)</span><br><span class="line"># 获取总行数</span><br><span class="line">totalRows &#x3D; table.nrows</span><br><span class="line"># 获取总列数</span><br><span class="line">totalCols &#x3D; table.ncols</span><br><span class="line">rowvalue &#x3D; table.row_values(0)</span><br><span class="line"># 获取一行的数值，例如第5行</span><br><span class="line">rowvalue &#x3D; table.row_values(5)</span><br><span class="line"># 获取一列的数值，例如第6列</span><br><span class="line">col_values &#x3D; table.col_values(6)</span><br><span class="line"># 获取一个单元格的数值，例如第5行第6列</span><br><span class="line">cell_value &#x3D; table.cell(5,6).value</span><br><span class="line">print(rowvalue)</span><br><span class="line">print(col_values)</span><br></pre></td></tr></table></figure>

<h3 id="读取excel的日期问题"><a href="#读取excel的日期问题" class="headerlink" title="读取excel的日期问题"></a>读取excel的日期问题</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">real_date_1 &#x3D; datetime(* xldate_as_tuple(row[0],0)).strftime(&#39;%Y-%m-%d&#39;)</span><br><span class="line">print(real_date_1)</span><br><span class="line"></span><br><span class="line">real_date_2 &#x3D; xldate_as_datetime(row[0],0).strftime(&#39;%m&#x2F;%d&#39;)</span><br><span class="line">print(real_date_2 )</span><br></pre></td></tr></table></figure>

<h2 id="文字生成图片"><a href="#文字生成图片" class="headerlink" title="文字生成图片"></a>文字生成图片</h2><p>pip install Pillow</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">im &#x3D; Image.new(&quot;RGB&quot;, (300, 300), (255, 255, 255))</span><br><span class="line">dr &#x3D; ImageDraw.Draw(im)</span><br><span class="line">font &#x3D; ImageFont.truetype(os.path.join(&quot;fonts&quot;, &quot;msyh.ttf&quot;), 30)</span><br><span class="line">dr.text((10, 5), content, font&#x3D;font, fill&#x3D;&quot;#000000&quot;)</span><br><span class="line"># im.show()</span><br><span class="line">im.save(&quot;output.png&quot;)</span><br></pre></td></tr></table></figure>
    </div>
  </div>
  
    <div class="copy-right">
      <div class="markdown-body">
        <blockquote>
        
        
          本文作者 : JohnScott <br/>
        
        原文链接 : <a href="">https://github.com/liuxue5213/liuxue5213.github.io/2020/Python%E7%AC%94%E8%AE%B0/</a><br>
        版权声明 : 本博客所有文章除特别声明外，均采用 <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议。转载请注明出处！
        </blockquote>
      </div>
    </div>
  
  
  
    <div class="social-share"
  style="margin-top: -2rem"
  data-wechat-qrcode-title="<p>微信扫一扫</p>"
  data-wechat-qrcode-helper="<p>微信右上角, 扫一扫分享</p>"
   data-sites="qzone, qq, weibo, wechat, douban, google, facebook, twitter" 
  
>
  <span style="color: #6b7487; font-size: 1.4rem;">分享到: </span>
</div>
<script src="https://cdn.bootcss.com/social-share.js/1.0.16/js/social-share.min.js" async>
  

  
    <div id="reward">
  
    <p id="reward-meta">知识 & 情怀 | 二者兼得</p>
  
  <button id="reward-btn">
    
    <span>感谢您的关心</span>
  </button>
  <div id="reward-qrcode">
    
      <div class="reward-qrcode--container">
        <img class="qrcode-img" src="/images/wechat.png" alt="微信扫一扫">
        <p class="qrcode-meta">微信扫一扫</p>
      </div>
    
      <div class="reward-qrcode--container">
        <img class="qrcode-img" src="/images/alipay.png" alt="支付宝扫一扫">
        <p class="qrcode-meta">支付宝扫一扫</p>
      </div>
    
  </div>

</div>

<script>
  (() => {
    let button = document.querySelector('#reward-btn'),
      qrcode = document.querySelector('#reward-qrcode'),
      display = false;
    
    button.addEventListener('click', () => {
      qrcode.style.display = display ? 'none' : 'block'
      display = !display
    }, false)
  })()
</script>
  

  <div class="article-footer">
    <div class="article-meta pull-left">
      <span>
        
          <i class="iconfont icon-06tags"></i>标签: 
          
          <span class="span--tag">
            <a href="/tags/Python/">
              #Python
            </a>
          </span>
          
        
      </span>
    </div>
    <div class="article-meta pull-right">
    </div>
  </div>
</div>


  <aside id="sidebar">
    <p id="sidebar-header"></p>
    <ol id="sidebar-toc"></ol>
  </aside>
  <script async>setTimeout(generateToc, 10);</script>


  <nav class="post-navigation">
    
      <div class="nav-pre">
        <i class="iconfont icon-prev"></i>
        上一篇:
        <a href="/2019/%E5%86%99%E5%9C%A82019%E5%B9%B4%E7%9A%84%E6%9C%80%E5%90%8E/" target="_self">写给2019年的最后</a>
      </div>
    
    
      <div class="nav-next">
        下一篇:
        <a href="/2020/%E6%9C%89%E4%B8%80%E4%B8%AA%E8%AF%97%E4%BA%BA-%E4%BB%96%E5%8F%AB%E8%B4%BA%E7%82%9C/" target="_self">有一个诗人 他叫贺炜</a>
        <i class="iconfont icon-next"></i>
      </div>
    
  </nav>

  
    <a href="#comment" class="comment-anchor"></a>
<div class="comment-title"><i class="iconfont icon-footprint"></i> 留下足迹 <i class="iconfont icon-footprint"></i></div>
<div id="vcomments"></div>

<script defer>
  if( true ) {
    let path = getRealPath()
    new Valine({
      el: "#vcomments",
      appId: "E4f1KI8G9DKenPGcXCkfpCMV-gzGzoHsz",
      appKey: "6VNHrdDAu0JKJXxyMajHk6qD",
      notify: false,
      verify: false,
      avatar: "robohash",
      placeholder: "正确填写邮箱, 才能及时收到回复哦♪(^∇^*)",
      path
    });
  }
</script>
   

  
    <script defer>
const valineAPI = (() => {
  try {
    AV.init("E4f1KI8G9DKenPGcXCkfpCMV-gzGzoHsz", "6VNHrdDAu0JKJXxyMajHk6qD");
  } catch(error) {}
  const isExist = (identity) => {
    identity = identity || getRealPath();
    let query = new AV.Query('Timer');
    return new Promise((resolve, reject) => {
      query.equalTo("identity", identity);
      query.find().then(results => {
        resolve(results.length > 0);
      }, error => reject(error));
    })
  }

  const _get = (identity) => {
    let query = null;
    if(identity && identity instanceof Array){
      let querys = [];
      for(let i = 0; i < identity.length; ++i) {
        querys[i] = new AV.Query('Timer');
        querys[i].equalTo('identity', identity[i]);
      }
      query = AV.Query.or.apply(null ,querys);
    } else {
      identity = identity || getRealPath();
      query = new AV.Query("Timer");
      query.equalTo("identity", identity);
    }

    return new Promise((resolve, reject) => {
      query.find()
      .then(results => resolve(results))
      .catch(error => reject(error))
    })
  }

  const create = (identity) => {
    identity = identity || getRealPath();
    return new Promise((resolve, reject) => {
      let Todo = AV.Object.extend('Timer');
      let todo = new Todo();
      todo.set("times", 1);
      todo.set("identity", identity);
      todo.save().then(res => resolve(true), error => reject(error));
    })
  }

  const update = (identity) => {
    identity = identity || getRealPath();
    return new Promise((resolve, reject) => {
      let query = new AV.Query('Timer');
      query.equalTo("identity", identity);
      query.find().then(todos => {
        todos.forEach(todo => {
          todo.set("times", todo.attributes.times + 1);
        });
        return AV.Object.saveAll(todos);
      }).then(todos => resolve(true), error => reject(error));
    })
  }

  return {
    isExist,
    _get,
    update,
    create
  }
})()

const calcAndWriteTimes = () => {
  let isPost = true;

  let timerAllDOM = document.querySelectorAll(".article-timer");

  if(isPost) {
    let identity = timerAllDOM[0].getAttribute("data-identity");
    valineAPI.isExist(identity)
    .then(exist => {
      if(exist) {
        return valineAPI.update(identity);
      }
      return new Promise(resolve => resolve(true));
    })
    .then( succuess => valineAPI._get(identity))
    .then( result => timerAllDOM[0].innerText = result[0].attributes.times)
    .catch(error => console.log(error.message))
    return ;
  }

  let timerDOMCache = {};

  for(let timerDOM of timerAllDOM) {
    let identity = timerDOM.getAttribute("data-identity");
    if(timerDOMCache.hasOwnProperty(identity)){
      timerDOMCache[identity].dom.push(timerDOM);
    }else{
      timerDOMCache[identity] = {
        dom: [timerDOM],
        times: undefined
      };
    }
  }

  let identities = Object.keys(timerDOMCache);
  valineAPI._get(identities).then(results => {
    for(let result of results) {
      let {identity, times} = result.attributes;
      timerDOMCache[identity].times = times;
      timerDOMCache[identity].dom.map(item => item.innerText = times);
    }
    for(let identity of identities) {
      if(timerDOMCache[identity].times){
        continue;
      }
      timerDOMCache[identity].dom.map(item => item.innerText = 1);
      valineAPI.create(identity);
    }
  }).catch(error => console.log(error.message))
}

if(true){
  calcAndWriteTimes();
}
</script>
   

</div>


      <footer>
  <p class="site-info">
    博客已萌萌哒运行<span id="time-to-now"></span><span class="my-face">(●'◡'●)ﾉ♥</span>
    <br>
    Theme - <a href="https://github.com/dongyuanxin/theme-bmw">BMW</a> | Made With 💗 | Powered by <a target="_blank" rel="noopener" href="https://godbmw.com/">GodBMW</a>
    <br>
    
  </p>
</footer>



<script>
const timeToNowDOM = document.querySelector("#time-to-now");
const startTimestamp = new Date(2015, 0, 1).getTime();

const updateTimeStr = () => {
  let offset = parseInt(
      (new Date().getTime() - startTimestamp) / 1000,
      10
    ),
    day = Math.floor(offset / 86400),
    hour = Math.floor((offset % 86400) / 3600),
    minute = Math.floor(((offset % 86400) % 3600) / 60),
    second = Math.floor(((offset % 86400) % 3600) % 60);
  timeToNowDOM.innerHTML =
    day + "天" + hour + "小时" + minute + "分钟" + second + "秒";
  setTimeout(updateTimeStr, 500);
}

setTimeout(updateTimeStr, 500);
</script>


      <div class="back-to-top hidden">
  <span>
    <i class="iconfont icon-60"></i><span></span>%
  </span>
</div>

<script>
const updateIconToTop = percent => {
  let dom = document.querySelector(".back-to-top span span");
  dom.innerText = percent;
  if(percent < 1) {
    document.querySelector(".back-to-top").className = "back-to-top hidden";
  } else {
    document.querySelector(".back-to-top").className = "back-to-top";
  }
}

const handleScoll = () => {
  let isRunning = false;
  return () => {
    if (isRunning) return;
    isRunning = true;
    window.requestAnimationFrame(timestamp => {
      let scrollTop =
          document.documentElement.scrollTop || document.body.scrollTop,
        scrollHeight =
          document.documentElement.scrollHeight ||
          document.body.scrollHeight,
        clientHeight =
          document.documentElement.clientHeight ||
          document.body.clientHeight;
      isRunning = false;
      if (scrollTop <= 1) {
        updateIconToTop(0);
        return;
      }
      if (scrollTop + clientHeight >= scrollHeight) {
        updateIconToTop(100);
      } else {
        updateIconToTop(parseInt(
          100 * scrollTop / (scrollHeight - clientHeight),
          10
        ));
      }
    });
  };
}

const backToTop = () => {
  let scrollTop =
      document.documentElement.scrollTop || document.body.scrollTop,
    delay = 10,
    time = 200;
  if (scrollTop <= 20) {
    document.documentElement.scrollTop = 0;
    document.body.scrollTop = 0;
    return;
  }
  let step = Math.ceil(scrollTop * delay / time);
  let timer = setInterval(() => {
    scrollTop =
      document.documentElement.scrollTop || document.body.scrollTop;
    if (scrollTop - step <= 0) {
      document.documentElement.scrollTop = 0;
      document.body.scrollTop = 0;
      clearInterval(timer);
    } else {
      document.documentElement.scrollTop = scrollTop - step;
      document.body.scrollTop = scrollTop - step;
    }
  }, delay);
}

document.addEventListener("scroll", handleScoll(), false);

document.querySelector(".back-to-top").addEventListener("click", backToTop, false);

</script>

    </div>

    
      <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script>
<script>
  (() => {
    const mathjaxConfig = {
      showProcessingMessages: false, //关闭js加载过程信息
      messageStyle: "none", //不显示信息
      jax: ["input/TeX", "output/HTML-CSS"],
      tex2jax: {
        inlineMath: [["$", "$"], ["\\(", "\\)"]], //行内公式选择符
        displayMath: [["$$", "$$"], ["\\[", "\\]"]], //段内公式选择符
        skipTags: ["script", "noscript", "style", "textarea", "pre", "code", "a"] //避开某些标签
      },
      "HTML-CSS": {
        availableFonts: ["STIX", "TeX"], //可选字体
        showMathMenu: false //关闭右击菜单显示
      }
    }

    let mathjaxInterval = setInterval(() => {
      if(!window.MathJax){
        return;
      }
      window.MathJax.Hub.Config(mathjaxConfig)
      window.MathJax.Hub.Queue(["Typeset", MathJax.Hub, document.getElementById('app')])

      clearInterval(mathjaxInterval)
    }, 10)    
  })()
</script>
    

    <script src="https://cdn.bootcss.com/fancybox/3.5.2/jquery.fancybox.min.js" async></script>
<script async>
  let fancyTimer = setInterval(function(){
    if(!window.$){
      return;
    }
    $(document).ready(function() {
      $(".post img").each(function () {
        if($(this).parent().get(0).tagName.toLowerCase() === "a") {
          return;
        }
        // $(this).attr("data-fancybox", "gallery"); // if you add 'data-fancybox', img will display after showed
        var element = document.createElement("a");
        $(element).attr("data-fancybox", "gallery");
        $(element).attr("href", $(this).attr("src"));
        $(this).wrap(element);
      });
      
      clearInterval(fancyTimer);
    });
  }, 10);
</script>

    
  </body>

</html>
